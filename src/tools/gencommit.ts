// gencommit å·¥å…·å®ç°
export async function gencommit(args: any) {
  try {
    const changes = args?.changes || "";
    const type = args?.type || ""; // feat, fix, docs, style, refactor, test, chore

    const message = `è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤ç”Ÿæˆè§„èŒƒçš„ Git commit æ¶ˆæ¯ï¼š

**ç¬¬ä¸€æ­¥ï¼šè·å–å˜æ›´ä¿¡æ¯**
${changes ? `å·²æä¾›å˜æ›´å†…å®¹ï¼š\n${changes}` : `
1. æ‰§è¡Œ \`git status\` æŸ¥çœ‹ä¿®æ”¹çš„æ–‡ä»¶
2. æ‰§è¡Œ \`git diff\` æŸ¥çœ‹å…·ä½“å˜æ›´å†…å®¹
3. å¦‚æœæœ‰æš‚å­˜çš„æ–‡ä»¶ï¼Œæ‰§è¡Œ \`git diff --staged\` æŸ¥çœ‹æš‚å­˜åŒºå˜æ›´
`}

**ç¬¬äºŒæ­¥ï¼šåˆ†æå˜æ›´**
- è¯†åˆ«å˜æ›´ç±»å‹ï¼ˆæ–°åŠŸèƒ½ã€ä¿®å¤ã€é‡æ„ç­‰ï¼‰
- ç¡®å®šå½±å“èŒƒå›´ï¼ˆå“ªä¸ªæ¨¡å—/åŠŸèƒ½ï¼‰
- æ€»ç»“ä¸»è¦å˜æ›´ç‚¹

---

ğŸ¯ **Commit æ¶ˆæ¯è§„èŒƒ**ï¼ˆå‚è€ƒ Conventional Commitsï¼‰ï¼š

**æ ¼å¼**ï¼š
\`\`\`
<type>(<scope>): <subject>

<body>

<footer>
\`\`\`

**ç±»å‹ï¼ˆtypeï¼‰**ï¼š
- feat: æ–°åŠŸèƒ½
- fix: Bug ä¿®å¤
- docs: æ–‡æ¡£å˜æ›´
- style: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- refactor: é‡æ„
- test: æµ‹è¯•ç›¸å…³
- chore: æ„å»º/å·¥å…·å˜æ›´

**è¦æ±‚**ï¼š
1. subject ä½¿ç”¨ä¸­æ–‡ï¼Œç®€æ´æ˜äº†ï¼ˆä¸è¶…è¿‡ 50 å­—ï¼‰
2. body è¯¦ç»†è¯´æ˜å˜æ›´å†…å®¹ï¼ˆå¯é€‰ï¼‰
3. footer å¼•ç”¨ç›¸å…³ issueï¼ˆå¦‚æœ‰ï¼‰
4. å¦‚æœ‰ç ´åæ€§å˜æ›´ï¼Œæ·»åŠ  BREAKING CHANGE

**ç¤ºä¾‹**ï¼š
\`\`\`
feat(auth): æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½

- å®ç° JWT è®¤è¯æœºåˆ¶
- æ·»åŠ å¯†ç åŠ å¯†å­˜å‚¨
- å®ç°ç™»å½•å¤±è´¥é‡è¯•é™åˆ¶

Closes #123
\`\`\`

---

**ç¬¬ä¸‰æ­¥ï¼šç”Ÿæˆå¹¶æäº¤**
1. æ ¹æ®å˜æ›´å†…å®¹ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ commit æ¶ˆæ¯
2. ä½¿ç”¨ \`git commit -m "<ç”Ÿæˆçš„æ¶ˆæ¯>"\` æäº¤
3. å¦‚æœæ¶ˆæ¯è¾ƒé•¿ï¼Œä½¿ç”¨ \`git commit\` æ‰“å¼€ç¼–è¾‘å™¨å¡«å†™å®Œæ•´æ¶ˆæ¯

ğŸ’¡ **æç¤º**ï¼š
- å¦‚æœæš‚å­˜åŒºä¸ºç©ºï¼Œæç¤ºç”¨æˆ·å…ˆä½¿ç”¨ \`git add\` æ·»åŠ æ–‡ä»¶
- å¦‚æœå˜æ›´è¾ƒå¤šï¼Œå»ºè®®åˆ†å¤šæ¬¡æäº¤
- ç¡®ä¿ commit æ¶ˆæ¯æ¸…æ™°æè¿°äº†"åšäº†ä»€ä¹ˆ"å’Œ"ä¸ºä»€ä¹ˆ"

---

ç°åœ¨è¯·å¼€å§‹æ‰§è¡Œä¸Šè¿°æ­¥éª¤ã€‚`;

    return {
      content: [
        {
          type: "text",
          text: message,
        },
      ],
    };
  } catch (error) {
    const errorMessage =
      error instanceof Error ? error.message : String(error);
    return {
      content: [
        {
          type: "text",
          text: `âŒ ç”Ÿæˆ commit æ¶ˆæ¯å¤±è´¥: ${errorMessage}`,
        },
      ],
      isError: true,
    };
  }
}

