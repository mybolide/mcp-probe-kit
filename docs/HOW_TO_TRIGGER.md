# 🎯 如何让 AI 正确调用工具

> 实用的对话技巧，让 AI 准确理解你的意图并调用正确的工具

---

## 📖 目录

- [为什么需要这个指南](#为什么需要这个指南)
- [工具触发关键词](#工具触发关键词)
- [最佳实践](#最佳实践)
- [常见场景对话示例](#常见场景对话示例)

---

## 🤔 为什么需要这个指南

AI 需要理解你的意图才能调用正确的工具。使用明确的关键词和清晰的表达，可以：

✅ 提高工具调用准确率  
✅ 减少来回确认次数  
✅ 获得更快的响应  
✅ 避免调用错误的工具  

---

## 🔑 工具触发关键词

### 1️⃣ 调试问题 → `debug`

**触发关键词**：调试、debug、分析错误、为什么报错、bug、问题

**✅ 推荐说法**
```
"debug 这个弹窗逻辑"
"调试一下为什么会报错"
"帮我分析这个 bug"
"这里有个问题，帮我看看"
"为什么这个方法不工作"
```

**❌ 不推荐说法**
```
"看看这个"（太模糊）
"有问题"（没说什么问题）
"不对"（没说哪里不对）
```

---

### 2️⃣ 代码解释 → `explain`

**触发关键词**：解释、说明、理解、梳理、讲解、这是什么

**✅ 推荐说法**
```
"解释一下这段代码"
"这个方法是干什么的"
"帮我理解这个逻辑"
"梳理一下这个流程"
"讲解一下这个算法"
```

**❌ 不推荐说法**
```
"这个"（没说要做什么）
"看不懂"（没说要解释）
```

---

### 3️⃣ 代码审查 → `code_review`

**触发关键词**：审查、review、检查、质量、有没有问题

**✅ 推荐说法**
```
"审查一下这个文件"
"review 这段代码"
"检查代码质量"
"有没有安全问题"
"帮我看看代码有什么问题"
```

**❌ 不推荐说法**
```
"看看"（没说要审查）
"帮我弄一下"（意图不明）
```

---

### 4️⃣ 安全扫描 → `security_scan`

**触发关键词**：安全、漏洞、注入、XSS、SQL注入、安全扫描

**✅ 推荐说法**
```
"扫描安全漏洞"
"检查有没有 SQL 注入"
"安全审查这段代码"
"有没有 XSS 风险"
"检查安全问题"
```

**❌ 不推荐说法**
```
"检查一下"（没说检查什么）
"有问题吗"（太笼统）
```

---

### 5️⃣ 生成测试 → `gentest`

**触发关键词**：测试、test、单元测试、写测试

**✅ 推荐说法**
```
"生成测试用例"
"写个测试"
"帮我测试这个方法"
"为这个组件生成测试"
"添加单元测试"
```

**❌ 不推荐说法**
```
"测一下"（没说要生成测试代码）
```

---

### 6️⃣ 性能分析 → `perf`

**触发关键词**：性能、优化、慢、瓶颈、卡顿

**✅ 推荐说法**
```
"分析性能"
"优化这段代码的性能"
"有没有性能瓶颈"
"这里会不会慢"
"为什么这么卡"
```

**❌ 不推荐说法**
```
"优化一下"（没说优化什么）
"改进"（太笼统）
```

---

### 7️⃣ 重构建议 → `refactor`

**触发关键词**：重构、改进、简化、优化结构、代码太复杂

**✅ 推荐说法**
```
"重构一下这段代码"
"怎么改进这个方法"
"代码太复杂了，简化一下"
"优化代码结构"
"这段代码可以怎么改"
```

**❌ 不推荐说法**
```
"改一下"（没说怎么改）
"弄好看点"（意图不明）
```

---

### 8️⃣ 自动修复 → `fix`

**触发关键词**：修复、fix、lint错误、格式化、类型错误

**✅ 推荐说法**
```
"修复这些 lint 错误"
"自动修复格式问题"
"修复类型错误"
"fix 这些警告"
"格式化代码"
```

**❌ 不推荐说法**
```
"弄好"（没说要修复什么）
```

---

### 9️⃣ 生成文档 → `genapi` / `gendoc` / `genreadme`

**触发关键词**：文档、注释、API文档、README、JSDoc

**✅ 推荐说法**
```
"生成 API 文档"
"添加注释"
"生成 JSDoc"
"写个 README"
"为这个方法添加文档"
```

**❌ 不推荐说法**
```
"写点东西"（没说写什么）
```

---

### 🔟 生成 Commit → `gencommit`

**触发关键词**：commit、提交、提交信息、总结改动

**✅ 推荐说法**
```
"生成 commit 信息"
"帮我写提交信息"
"总结这次改动"
"生成 git commit"
```

**❌ 不推荐说法**
```
"写个信息"（没说是 commit）
```

---

### 1️⃣1️⃣ 代码转换 → `convert`

**触发关键词**：转换、改成、转为、迁移

**✅ 推荐说法**
```
"把这个转成 TypeScript"
"Class 组件改成 Hooks"
"转换成 ES6 语法"
"迁移到 Vue 3"
```

**❌ 不推荐说法**
```
"换一下"（没说换成什么）
```

---

### 1️⃣2️⃣ 生成 Mock 数据 → `gen_mock`

**触发关键词**：Mock、模拟数据、假数据、测试数据

**✅ 推荐说法**
```
"生成 Mock 数据"
"创建测试数据"
"生成假数据"
"为这个接口生成模拟数据"
```

**❌ 不推荐说法**
```
"弄点数据"（没说是 Mock）
```

---

### 1️⃣3️⃣ Bug 修复流程 → `fix_bug`

**触发关键词**：修复 Bug、Bug 修复、解决问题、修这个错误

**✅ 推荐说法**
```
"修复这个 Bug"
"帮我解决这个错误"
"fix_bug 这个问题"
"完整修复这个 Bug"
```

**❌ 不推荐说法**
```
"搞定这个"（意图不明）
```

---

### 1️⃣4️⃣ 工作量估算 → `estimate`

**触发关键词**：估算、工作量、需要多久、故事点

**✅ 推荐说法**
```
"估算工作量"
"这个任务需要多久"
"评估开发时间"
"给个故事点估算"
```

**❌ 不推荐说法**
```
"要多久"（太简短）
```

---

### 1️⃣5️⃣ 生成 SQL → `gensql`

**触发关键词**：SQL、查询、数据库、建表

**✅ 推荐说法**
```
"生成 SQL 查询"
"写个查询语句"
"创建数据库表"
"查询最近30天的用户"
```

**❌ 不推荐说法**
```
"查一下"（没说要生成 SQL）
```

---

### 1️⃣6️⃣ 生成 UI 组件 → `genui`

**触发关键词**：组件、UI、界面、按钮、表单

**✅ 推荐说法**
```
"生成一个 Button 组件"
"创建登录表单"
"写个 Modal 组件"
"生成用户卡片 UI"
```

**❌ 不推荐说法**
```
"做个界面"（没说具体是什么）
```

---

### 1️⃣7️⃣ 设计稿转代码 → `design2code`

**触发关键词**：设计稿、图片转代码、HTML转Vue、HTML转React、还原设计

**✅ 推荐说法**
```
"把这个设计稿转成 Vue 代码"
"design2code https://example.com/design.png"
"将这个 HTML 转换为 React 组件"
"还原这个设计稿"
"图片转代码"
```

**❌ 不推荐说法**
```
"做个页面"（没说基于什么）
"转一下"（没说转什么）
```

---

---

## 🚀 智能编排工具触发

> 智能编排工具自动组合多个基础工具，一键完成复杂工作流

### 📋 编排工具分类

#### 🎯 开发流程类

####### 1️⃣7️⃣ 新功能开发 → `start_feature`

**触发关键词**：新功能、开发功能、添加功能、实现功能、feature

**自动执行**：检查上下文 → 生成功能规格 → 工作量估算

**✅ 推荐说法**
```
"开发用户登录功能"
"添加个人资料功能"
"实现支付功能"
"start_feature 用户设置"
"新功能：消息通知"
```

**❌ 不推荐说法**
```
"做个功能"（没说什么功能）
"加个东西"（意图不明）
```

---

##### 1️⃣8️⃣ Bug 修复编排 → `start_bugfix`

**触发关键词**：修 Bug、Bug 修复、解决错误、完整修复、bugfix

**自动执行**：检查上下文 → 问题定位 → 修复方案 → 生成测试

**✅ 推荐说法**
```
"start_bugfix 修复这个错误"
"完整修复这个 Bug"
"帮我修复登录问题"
"Bug 修复：用户无法登出"
```

**❌ 不推荐说法**
```
"修一下"（没说要完整流程）
"有问题"（太模糊）
```

---

##### 2️⃣2️⃣ 快速上手 → `start_onboard`

**触发关键词**：了解项目、快速上手、分析项目、onboard、接手项目

**自动执行**：项目分析 → 生成项目上下文文档

**✅ 推荐说法**
```
"快速了解这个项目"
"start_onboard"
"帮我分析项目结构"
"接手这个项目"
"熟悉一下代码"
```

**❌ 不推荐说法**
```
"看看项目"（没说要生成文档）
"了解一下"（太笼统）
```

---

#### 🔍 质量保障类

##### 1️⃣9️⃣ 代码体检 → `start_review`

**触发关键词**：全面审查、代码体检、完整检查、全面检查、review

**自动执行**：检查上下文 → 代码审查 → 安全扫描 → 性能分析

**✅ 推荐说法**
```
"全面审查这个文件"
"代码体检"
"完整检查代码质量"
"start_review 这个模块"
"全面检查 @api/user.ts"
```

**❌ 不推荐说法**
```
"看看代码"（没说要全面检查）
"检查一下"（太简单）
```

---

##### 2️⃣1️⃣ 代码重构编排 → `start_refactor`

**触发关键词**：完整重构、重构流程、重构并测试

**自动执行**：检查上下文 → 代码审查 → 重构方案 → 生成测试

**✅ 推荐说法**
```
"完整重构这个模块"
"start_refactor 这段代码"
"重构并生成测试"
"重构 @legacy-code.js"
```

**❌ 不推荐说法**
```
"改改代码"（没说要完整流程）
"优化一下"（太笼统）
```

---

#### 📦 发布管理类

##### 2️⃣0️⃣ 发布准备 → `start_release`

**触发关键词**：发布、release、准备发布、版本发布

**自动执行**：检查上下文 → 生成 Changelog → 生成 PR 描述

**✅ 推荐说法**
```
"准备发布 v1.2.0"
"start_release v1.2.0"
"生成发布资料"
"发布版本 v1.2.0"
```

**❌ 不推荐说法**
```
"要发版了"（没说要准备什么）
"发布"（没说版本号）
```

---

#### 📝 文档生成类

##### 2️⃣3️⃣ API 开发 → `start_api`

**触发关键词**：API 开发、接口开发、API 资料、接口文档

**自动执行**：检查上下文 → API 文档 → Mock 数据 → API 测试

**✅ 推荐说法**
```
"为这个 API 生成完整资料"
"start_api 用户接口"
"开发用户 API"
"API 开发：订单接口"
```

**❌ 不推荐说法**
```
"写个接口"（没说要完整资料）
"做个 API"（太简单）
```

---

##### 2️⃣4️⃣ 文档生成 → `start_doc`

**触发关键词**：生成完整文档、项目文档、全套文档

**自动执行**：检查上下文 → 代码注释 → README → API 文档

**✅ 推荐说法**
```
"生成完整文档"
"start_doc 这个项目"
"为项目生成文档"
"生成全套文档"
```

**❌ 不推荐说法**
```
"写点文档"（没说要完整的）
"加个文档"（太笼统）
```

---

### 🎯 智能编排 vs 基础工具

| 场景 | 基础工具 | 智能编排 | 推荐 |
|------|---------|---------|------|
| 开发新功能 | add_feature + estimate | start_feature | ⭐⭐⭐ |
| 修复 Bug | fix_bug + gentest + gencommit | start_bugfix | ⭐⭐⭐ |
| 代码审查 | code_review | start_review | ⭐⭐⭐ |
| 代码重构 | refactor + gentest | start_refactor | ⭐⭐⭐ |
| 准备发布 | genchangelog + genpr | start_release | ⭐⭐⭐ |
| 了解项目 | analyze_project + init_project_context | start_onboard | ⭐⭐⭐ |
| API 开发 | genapi + gen_mock + gentest | start_api | ⭐⭐ |
| 生成文档 | gendoc + genreadme + genapi | start_doc | ⭐⭐ |

**建议**：优先使用智能编排工具，它们会自动处理项目上下文并组合多个工具。

---

## 💡 最佳实践

### ✅ 推荐的说法（明确意图）

```
"debug 这个登录逻辑有问题"
"审查一下 view.vue 的代码质量"
"解释一下 fetchDetail 方法"
"生成这个组件的测试用例"
"分析一下这个页面的性能"
"扫描安全漏洞"
"重构这段复杂代码"
"生成 Mock 数据"
"估算这个任务的工作量"
```

### ❌ 不太好的说法（意图模糊）

```
"看看这个"
"帮我弄一下"
"这里不对"
"优化一下"（没说优化什么）
"改改"（没说怎么改）
"检查一下"（没说检查什么）
```

---

## 🎯 快速触发技巧

### 方式 1：直接用动词开头

```
"审查 view.vue"
"解释 handleExtractCodeConfirm"
"调试弹窗问题"
"生成测试"
"扫描安全问题"
"重构这段代码"
```

### 方式 2：明确指定工具

```
"debug 这个问题"
"code_review 这段代码"
"explain 这个逻辑"
"security_scan 这个文件"
"gentest 这个方法"
"start_feature 用户登录"
```

### 方式 3：结合上下文

```
"这个方法有 bug，帮我 debug"
"代码写完了，review 一下"
"不太懂这段，解释一下"
"检查一下有没有安全漏洞"
"这段代码太复杂，重构一下"
```

### 方式 4：带文件引用

```
"debug @LoginForm.tsx"
"review @api/user.ts"
"explain @utils/format.ts"
"security_scan @payment.ts"
"gentest @Button.tsx"
```

---

## 📚 常见场景对话示例

### 场景 1：遇到 Bug

**❌ 不好的说法**
```
你: "这里有问题"
AI: "请问是什么问题？需要我做什么？"
```

**✅ 好的说法**
```
你: "debug 这个登录逻辑，点击登录按钮没反应"
AI: [自动调用 debug 工具]
```

---

### 场景 2：不理解代码

**❌ 不好的说法**
```
你: "看不懂"
AI: "请问哪里看不懂？"
```

**✅ 好的说法**
```
你: "解释一下 @utils/auth.ts 的 validateToken 方法"
AI: [自动调用 explain 工具]
```

---

### 场景 3：代码审查

**❌ 不好的说法**
```
你: "帮我看看"
AI: "请问要看什么？"
```

**✅ 好的说法**
```
你: "审查 @components/UserProfile.tsx 的代码质量"
AI: [自动调用 code_review 工具]
```

---

### 场景 4：安全检查

**❌ 不好的说法**
```
你: "检查一下"
AI: "请问要检查什么？"
```

**✅ 好的说法**
```
你: "扫描 @api/payment.ts 的安全漏洞"
AI: [自动调用 security_scan 工具]
```

---

### 场景 5：性能优化

**❌ 不好的说法**
```
你: "优化一下"
AI: "请问要优化什么？"
```

**✅ 好的说法**
```
你: "分析 @pages/Dashboard.tsx 的性能瓶颈"
AI: [自动调用 perf 工具]
```

---

### 场景 6：开发新功能

**❌ 不好的说法**
```
你: "做个功能"
AI: "请问要做什么功能？"
```

**✅ 好的说法**
```
你: "start_feature user-settings '用户设置页面'"
AI: [自动调用 start_feature 编排]
```

---

### 场景 7：修复 Bug

**❌ 不好的说法**
```
你: "修一下"
AI: "请问要修什么？"
```

**✅ 好的说法**
```
你: "start_bugfix 修复登录超时问题"
然后粘贴错误信息
AI: [自动调用 start_bugfix 编排]
```

---

### 场景 8：代码体检

**❌ 不好的说法**
```
你: "检查代码"
AI: "请问要检查什么？"
```

**✅ 好的说法**
```
你: "start_review @src/api/ 全面体检"
AI: [自动调用 start_review 编排]
```

---

## 🎓 进阶技巧

### 1. 组合关键词

```
"审查并生成测试"
→ AI 会依次调用 code_review 和 gentest

"解释这段代码，然后重构"
→ AI 会依次调用 explain 和 refactor

"扫描安全问题并修复"
→ AI 会依次调用 security_scan 和 fix
```

### 2. 使用上下文

```
"这个方法性能不好，帮我优化"
→ AI 会调用 perf 分析，然后调用 refactor

"代码写完了，帮我 review 并生成测试"
→ AI 会调用 code_review 和 gentest
```

### 3. 明确范围

```
"审查所有 API 文件"
→ code_review @api/*.ts

"为所有组件生成测试"
→ gentest @components/*.tsx

"扫描整个项目的安全问题"
→ security_scan @src/
```

---

## 📊 工具选择决策表

### 基础工具

| 你想做什么 | 关键词 | 调用的工具 |
|-----------|--------|-----------|
| 调试问题 | debug、调试、分析错误 | `debug` |
| 理解代码 | 解释、说明、理解 | `explain` |
| 审查代码 | 审查、review、检查质量 | `code_review` |
| 安全检查 | 安全、漏洞、扫描 | `security_scan` |
| 生成测试 | 测试、test、单元测试 | `gentest` |
| 性能分析 | 性能、优化、慢、瓶颈 | `perf` |
| 重构代码 | 重构、改进、简化 | `refactor` |
| 修复错误 | 修复、fix、lint错误 | `fix` |
| 生成文档 | 文档、注释、API文档 | `genapi`/`gendoc` |
| 提交代码 | commit、提交信息 | `gencommit` |
| 代码转换 | 转换、改成、迁移 | `convert` |
| Mock数据 | Mock、模拟数据 | `gen_mock` |
| 设计稿转代码 | 设计稿、图片转代码、HTML转Vue | `design2code` |
| Bug修复流程 | 修复Bug、完整修复 | `fix_bug` |
| 工作量估算 | 估算、工作量、需要多久 | `estimate` |

### 智能编排工具（推荐优先使用）

#### 🎯 开发流程类

| 你想做什么 | 关键词 | 调用的工具 | 自动执行 |
|-----------|--------|-----------|----------|
| 开发新功能 | 新功能、开发功能、feature | `start_feature` ⭐⭐⭐ | 上下文 → 规格 → 估算 |
| 完整Bug修复 | Bug修复编排、bugfix | `start_bugfix` ⭐⭐⭐ | 上下文 → 定位 → 修复 → 测试 |
| 快速上手 | 了解项目、快速上手、onboard | `start_onboard` ⭐⭐⭐ | 项目分析 → 生成上下文 |

#### 🔍 质量保障类

| 你想做什么 | 关键词 | 调用的工具 | 自动执行 |
|-----------|--------|-----------|----------|
| 代码体检 | 全面审查、体检、完整检查 | `start_review` ⭐⭐⭐ | 上下文 → 审查 → 安全 → 性能 |
| 完整重构 | 完整重构、重构流程 | `start_refactor` ⭐⭐⭐ | 上下文 → 审查 → 重构 → 测试 |

#### 📦 发布管理类

| 你想做什么 | 关键词 | 调用的工具 | 自动执行 |
|-----------|--------|-----------|----------|
| 准备发布 | 发布、release、版本发布 | `start_release` ⭐⭐⭐ | 上下文 → Changelog → PR |

#### 📝 文档生成类

| 你想做什么 | 关键词 | 调用的工具 | 自动执行 |
|-----------|--------|-----------|----------|
| API开发 | API开发、接口开发、API资料 | `start_api` ⭐⭐ | 上下文 → 文档 → Mock → 测试 |
| 生成文档 | 完整文档、项目文档、全套文档 | `start_doc` ⭐⭐ | 上下文 → 注释 → README → API |

---

## 💬 实际对话模板

### 调试问题
```
"debug @LoginForm.tsx 点击登录按钮没反应"
"调试一下为什么这个请求失败了"
"帮我分析这个 TypeError"
```

### 代码解释
```
"解释 @utils/format.ts 的 formatDate 方法"
"这个 useEffect 是干什么的"
"梳理一下这个支付流程"
```

### 代码审查
```
"review @api/user.ts 的代码质量"
"审查这个组件有没有问题"
"检查 @payment.ts 的安全性"
```

### 安全扫描
```
"security_scan @api/payment.ts"
"扫描这个文件的安全漏洞"
"检查有没有 SQL 注入风险"
```

### 生成测试
```
"gentest @Button.tsx"
"为这个方法生成单元测试"
"写个测试覆盖这个逻辑"
```

### 性能分析
```
"perf @Dashboard.tsx"
"分析这个列表渲染的性能"
"这个查询会不会慢"
```

### 重构代码
```
"refactor @legacy-code.js"
"这段代码太复杂，简化一下"
"重构这个方法，提高可读性"
```

### 设计稿转代码
```
"design2code https://example.com/design.png"
"把这个设计稿转成 Vue 代码"
"将这个 HTML 转换为 React 组件"
"design2code" 然后提供设计稿描述
```

### 开发新功能
```
"start_feature user-profile '用户个人资料管理'"
"开发一个消息通知功能"
```

### 修复 Bug
```
"start_bugfix"
然后粘贴错误信息
```

### 代码体检
```
"start_review @src/api/"
"全面检查这个模块的代码质量"
```

---

## 🎯 记住这些要点

1. **明确意图** - 说清楚你想做什么
2. **使用关键词** - 用工具相关的动词
3. **指定范围** - 用 @ 引用具体文件
4. **提供上下文** - 说明问题的背景
5. **优先编排** - 复杂任务用 `start_*` 工具

---

**让 AI 更懂你，从清晰表达开始！** 🚀
