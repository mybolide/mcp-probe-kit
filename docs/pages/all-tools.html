<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰€æœ‰å·¥å…· - 20ä¸ªAIç ”å‘å·¥å…·å®Œæ•´åˆ—è¡¨ | MCP Probe Kit</title>
    <meta name="i18n-title" content="æ‰€æœ‰å·¥å…· - 21ä¸ªAIç ”å‘å·¥å…·å®Œæ•´åˆ—è¡¨ | MCP Probe Kit">
    
    <meta name="description" content="MCP Probe Kit å®Œæ•´å·¥å…·åˆ—è¡¨ï¼š6ä¸ªå·¥ä½œæµç¼–æ’å·¥å…·ã€3ä¸ªä»£ç åˆ†æå·¥å…·ã€1ä¸ªGitå·¥å…·ã€1ä¸ªç”Ÿæˆå·¥å…·ã€7ä¸ªé¡¹ç›®ç®¡ç†å·¥å…·ã€3ä¸ªUI/UXå·¥å…·ã€‚">
    <meta name="keywords" content="AI å¼€å‘å·¥å…·, ä»£ç ç”Ÿæˆå·¥å…·, ä»£ç å®¡æŸ¥å·¥å…·, Git è‡ªåŠ¨åŒ–, UI ç”Ÿæˆ, ä»£ç é‡æ„, æ€§èƒ½ä¼˜åŒ–, å®‰å…¨æ‰«æ">
    <meta name="author" content="å°å¢¨ (Kyle) - ByteZoneX">
    <meta name="robots" content="index, follow">
    
    <script src="../assets/js/tailwind.js" data-cfasync="false"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: { DEFAULT: '#2563EB', hover: '#1D4ED8' },
                        text: { primary: '#0F172A', secondary: '#475569', tertiary: '#64748B' },
                        bg: { page: '#F8FAFC', card: '#FFFFFF', hover: '#F1F5F9' },
                        border: '#E2E8F0',
                    },
                    fontFamily: { 
                        sans: ['-apple-system', 'BlinkMacSystemFont', '"PingFang SC"', '"Microsoft YaHei"', '"Segoe UI"', 'Roboto', '"Helvetica Neue"', 'Arial', '"Noto Sans CJK SC"', 'sans-serif'],
                        mono: ['ui-monospace', '"SF Mono"', '"Cascadia Code"', '"Consolas"', 'Menlo', 'Monaco', '"PingFang SC"', '"Microsoft YaHei"', '"Courier New"', 'monospace']
                    },
                }
            }
        }
    </script>
    <style>
        html { 
            scroll-behavior: smooth;
            font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Microsoft YaHei", "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans CJK SC", sans-serif;
        }
        code, kbd, pre, samp { font-family: ui-monospace, "SF Mono", "Cascadia Code", "Consolas", Menlo, Monaco, "PingFang SC", "Microsoft YaHei", "Courier New", monospace; }
        .code-block { overflow-x: auto; -webkit-overflow-scrolling: touch; }
        .sidebar-drawer { transition: transform 0.3s ease; }
        @media (max-width: 767px) {
            .sidebar-drawer { transform: translateX(-100%); }
            .sidebar-drawer.open { transform: translateX(0); }
        }
        .backdrop { opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
        .backdrop.active { opacity: 1; pointer-events: auto; }
    </style>
</head>
<body>
    <!-- A. é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="fixed top-0 left-0 right-0 h-14 bg-white/95 backdrop-blur-md border-b border-border z-50">
        <div class="h-full px-4 flex items-center justify-between">
            <a href="../index.html" class="flex items-center gap-2 text-base font-semibold text-text-primary no-underline">
                <span>ğŸš€</span>
                <span class="sm:inline hidden">MCP Probe Kit</span>
            </a>
            <button onclick="toggleSidebar()" class="md:hidden p-2 text-text-secondary hover:text-primary transition-colors">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
            </button>
        </div>
    </nav>

    <!-- ä¾§è¾¹æ é®ç½© -->
    <div class="fixed inset-0 bg-black/50 z-40 backdrop opacity-0 pointer-events-none transition-opacity duration-300 md:hidden" onclick="toggleSidebar()" id="backdrop"></div>

    <!-- B. ä¾§è¾¹æ  -->
    <aside class="fixed left-0 top-14 bottom-0 w-64 bg-white border-r border-border z-50 sidebar-drawer overflow-y-auto md:translate-x-0 md:block" id="sidebar">
        <div class="p-4">
            <div class="mb-4">
                <div class="text-xs font-semibold text-text-tertiary uppercase tracking-wider mb-2 px-2">å¿«é€Ÿå¼€å§‹</div>
                <a href="../index.html" class="flex items-center gap-2 px-3 py-2 rounded-md text-sm text-text-secondary hover:bg-bg-page hover:text-primary transition-colors no-underline">
                    <span>ğŸ </span>
                    <span>æ–‡æ¡£é¦–é¡µ</span>
                </a>
                <a href="./getting-started.html" class="flex items-center gap-2 px-3 py-2 rounded-md text-sm text-text-secondary hover:bg-bg-page hover:text-primary transition-colors no-underline">
                    <span>ğŸ“–</span>
                    <span>å®‰è£…é…ç½®</span>
                </a>
            </div>
            
            <div class="mb-4">
                <div class="text-xs font-semibold text-text-tertiary uppercase tracking-wider mb-2 px-2">å·¥å…·æ–‡æ¡£</div>
                <button onclick="toggleToolsMenu()" class="w-full flex items-center justify-between px-3 py-2 rounded-md text-sm font-medium bg-blue-50 text-primary border-l-3 border-primary hover:bg-bg-page transition-colors">
                    <div class="flex items-center gap-2">
                        <span>ğŸ› ï¸</span>
                        <span>æ‰€æœ‰å·¥å…·</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="bg-bg-page text-xs px-2 py-0.5 rounded-full">21</span>
                        <svg class="w-4 h-4 transition-transform" id="tools-menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                </button>
                <div id="tools-submenu" class="hidden mt-1 ml-4 space-y-1">
                    <!-- å·¥å…·åˆ—è¡¨å°†é€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            
            <div class="mb-4">
                <div class="text-xs font-semibold text-text-tertiary uppercase tracking-wider mb-2 px-2">æŒ‡å—</div>
                <a href="./migration.html" class="flex items-center gap-2 px-3 py-2 rounded-md text-sm text-text-secondary hover:bg-bg-page hover:text-primary transition-colors no-underline">
                    <span>ğŸš€</span>
                    <span>è¿ç§»æŒ‡å—</span>
                </a>
                <a href="./examples.html" class="flex items-center gap-2 px-3 py-2 rounded-md text-sm text-text-secondary hover:bg-bg-page hover:text-primary transition-colors no-underline">
                    <span>ğŸ’¡</span>
                    <span>æœ€ä½³å®è·µ</span>
                </a>
            </div>
            
            <div class="pt-4 border-t border-border">
                <a href="https://github.com/mybolide/mcp-probe-kit" target="_blank" rel="noopener" class="flex items-center gap-2 px-3 py-2 rounded-md text-sm text-text-secondary hover:bg-bg-page hover:text-primary transition-colors no-underline">
                    <span>ğŸ’»</span>
                    <span>GitHub</span>
                    <span class="ml-auto text-xs">â†—</span>
                </a>
                <a href="https://www.npmjs.com/package/mcp-probe-kit" target="_blank" rel="noopener" class="flex items-center gap-2 px-3 py-2 rounded-md text-sm text-text-secondary hover:bg-bg-page hover:text-primary transition-colors no-underline">
                    <span>ğŸ“¦</span>
                    <span>npm</span>
                    <span class="ml-auto text-xs">â†—</span>
                </a>
            </div>

            <!-- QR Code -->
            <div class="mt-4 pt-4 border-t border-border">
                <div class="text-center">
                    <div class="text-xs font-semibold text-text-tertiary mb-2">å…³æ³¨å…¬ä¼—å·</div>
                    <img src="https://oss.bolzjb.com/wx_qrcode.jpg" alt="å¾®ä¿¡å…¬ä¼—å·" class="w-[100px] h-[100px] mx-auto rounded-lg border border-border" />
                    <div class="text-xs text-text-tertiary mt-2">è·å–æ›´å¤šæŠ€æœ¯åˆ†äº«</div>
                </div>
            </div>
        </div>
    </aside>

    <!-- C. ä¸»å†…å®¹åŒº -->
    <main class="flex-1 mt-14 min-h-screen md:ml-64">
        <div class="max-w-5xl mx-auto p-4 sm:p-6 lg:p-8">
            
            <!-- é¢åŒ…å±‘ -->
            <nav class="flex items-center gap-1 text-sm text-text-secondary mb-4 overflow-x-auto whitespace-nowrap">
                <a href="../index.html" class="hover:text-primary transition-colors no-underline flex-shrink-0">æ–‡æ¡£é¦–é¡µ</a>
                <span class="text-text-tertiary">/</span>
                <span class="text-text-primary flex-shrink-0">å·¥å…·æ–‡æ¡£</span>
                <span class="text-text-tertiary">/</span>
                <span class="text-text-primary flex-shrink-0">æ‰€æœ‰å·¥å…·</span>
            </nav>

            <!-- é¡µé¢æ ‡é¢˜ -->
            <div class="mb-6">
                <h1 class="text-2xl sm:text-3xl font-bold text-text-primary mb-2">æ‰€æœ‰å·¥å…·</h1>
                <p class="text-sm sm:text-base text-text-secondary">MCP Probe Kit æä¾› 21 ä¸ªå®ç”¨å·¥å…·ï¼Œæ ¸å¿ƒä¸ç¼–æ’å·¥å…·æ”¯æŒç»“æ„åŒ–è¾“å‡º</p>
                <div class="flex flex-wrap items-center gap-2 mt-3 text-xs text-text-tertiary">
                    <span class="bg-blue-100 text-blue-700 px-2 py-0.5 rounded">v3.0.5</span>
                    <span>MCP 2025-11-25</span>
                    <span>SDK 1.25.3</span>
                </div>
                <div class="flex flex-wrap items-center gap-2 mt-2 text-xs text-text-tertiary">
                    <span>ğŸ“¦ v3.0.5</span>
                    <span>Â·</span>
                    <span>æœ€åæ›´æ–°ï¼š2026-02-04</span>
                    <span>Â·</span>
                    <span>åè®®ï¼šMCP 2025-11-25</span>
                    <span>Â·</span>
                    <span>SDKï¼š@modelcontextprotocol/sdk 1.25.3</span>
                    <span>Â·</span>
                    <a href="https://github.com/mybolide/mcp-probe-kit/edit/main/docs/pages/all-tools.html" target="_blank" rel="noopener" class="text-primary hover:underline">ç¼–è¾‘æ­¤é¡µ â†—</a>
                    <span>Â·</span>
                    <a href="https://github.com/mybolide/mcp-probe-kit/issues/new" target="_blank" rel="noopener" class="text-primary hover:underline">åé¦ˆé—®é¢˜ â†—</a>
                </div>
            </div>
            
            <!-- æœç´¢æ¡† -->
            <div class="mb-6">
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="ğŸ” æœç´¢å·¥å…·åç§°æˆ–æè¿°..." 
                    autocomplete="off"
                    class="w-full px-4 py-2.5 border border-border rounded-lg text-sm text-text-primary bg-white placeholder-text-tertiary focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"
                />
                <div id="searchResults" class="mt-2 text-sm text-text-tertiary"></div>
            </div>
            
            <!-- å·¥å…·åˆ—è¡¨å®¹å™¨ -->
            <div id="tools-container"></div>
            
            <!-- Footer -->
            <footer class="text-center text-sm text-text-tertiary py-4 border-t border-border mt-8">
                <p>Made with â¤ï¸ by <a href="https://www.bytezonex.com/" target="_blank" rel="noopener" class="text-primary hover:underline">å°å¢¨ (Kyle)</a></p>
                <p class="mt-1">Â© 2024-2026 MCP Probe Kit Â· <a href="https://github.com/mybolide/mcp-probe-kit" target="_blank" rel="noopener" class="text-primary hover:underline">GitHub â†—</a>
                    <div id="lang-switcher-container"></div></p>
            </footer>
        </div>
    </main>

    <!-- å¼•å…¥å·¥å…·æ•°æ® -->
    <script src="../data/tools.js"></script>
    <script src="../assets/js/i18n.js"></script>
    <script>
        // åŠ è½½ all-tools é¡µé¢ç‰¹å®šç¿»è¯‘
        let allToolsTranslations = {};
        
        async function loadAllToolsTranslations(lang) {
            try {
                const response = await fetch(`../i18n/all-tools/${lang}.json`);
                if (response.ok) {
                    allToolsTranslations = await response.json();
                }
            } catch (error) {
                console.warn('Failed to load all-tools translations:', error);
            }
        }
        
        // åº”ç”¨ç¿»è¯‘åˆ°å·¥å…·æ•°æ®
        function applyTranslationsToTools(lang) {
            const translations = allToolsTranslations[lang] || allToolsTranslations['zh-CN'] || {};
            const toolsTrans = translations.toolsData || {};
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            const titleMeta = document.querySelector('meta[name="i18n-title"]');
            if (titleMeta && translations.meta && translations.meta.title) {
                document.title = translations.meta.title;
            }
            
            // æ›´æ–° meta æ ‡ç­¾
            if (translations.meta) {
                const descMeta = document.querySelector('meta[name="description"]');
                const keywordsMeta = document.querySelector('meta[name="keywords"]');
                if (descMeta && translations.meta.description) descMeta.content = translations.meta.description;
                if (keywordsMeta && translations.meta.keywords) keywordsMeta.content = translations.meta.keywords;
            }
            
            // é‡ç½® allTools æ•°ç»„
            allTools = [];
            for (const [categoryKey, tools] of Object.entries(toolsData)) {
                if (categoryKey === 'categories') continue;
                tools.forEach(tool => { allTools.push({ ...tool, category: categoryKey }); });
            }
            
            // æ›´æ–° toolsData ä¸­çš„å·¥å…·æè¿°
            for (const categoryKey in toolsData) {
                if (categoryKey === 'categories') continue;
                
                toolsData[categoryKey].forEach(tool => {
                    const toolTrans = toolsTrans[tool.name];
                    if (toolTrans) {
                        tool.description = toolTrans.description || tool.description;
                        if (toolTrans.usage) tool.usage = toolTrans.usage;
                    }
                });
            }
        }
        let toolsMenuExpanded = true;
        
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const backdrop = document.getElementById('backdrop');
            const isOpen = sidebar.classList.contains('open');
            if (isOpen) {
                sidebar.classList.remove('open');
                backdrop.classList.remove('active');
            } else {
                sidebar.classList.add('open');
                backdrop.classList.add('active');
            }
        }

        function toggleToolsMenu() {
            toolsMenuExpanded = !toolsMenuExpanded;
            const submenu = document.getElementById('tools-submenu');
            const icon = document.getElementById('tools-menu-icon');
            if (toolsMenuExpanded) {
                submenu.classList.remove('hidden');
                icon.style.transform = 'rotate(180deg)';
            } else {
                submenu.classList.add('hidden');
                icon.style.transform = '';
            }
        }

        const toolDescriptions = {
            'start_feature': 'æ–°åŠŸèƒ½', 'start_bugfix': 'ä¿®Bug', 'start_onboard': 'å¿«é€Ÿä¸Šæ‰‹',
            'start_ralph': 'å¾ªç¯å¼€å‘', 'start_product': 'äº§å“è®¾è®¡', 'start_ui': 'UIå¼€å‘',
            'code_review': 'å®¡æŸ¥ä»£ç ', 'fix_bug': 'ä¿®å¤Bug', 'refactor': 'é‡æ„å»ºè®®',
            'gencommit': 'ç”Ÿæˆæäº¤', 'gentest': 'ç”Ÿæˆæµ‹è¯•', 'git_work_report': 'å·¥ä½œæŠ¥å‘Š',
            'init_project': 'åˆå§‹åŒ–', 'init_project_context': 'é¡¹ç›®ä¸Šä¸‹æ–‡', 'add_feature': 'æ·»åŠ åŠŸèƒ½',
            'estimate': 'å·¥ä½œé‡', 'interview': 'éœ€æ±‚è®¿è°ˆ', 'ask_user': 'æé—®ç”¨æˆ·',
            'ui_design_system': 'è®¾è®¡ç³»ç»Ÿ', 'ui_search': 'æœç´¢UI', 'sync_ui_data': 'åŒæ­¥æ•°æ®',
            'init_component_catalog': 'ç»„ä»¶ç›®å½•', 'render_ui': 'UIæ¸²æŸ“', 'start_api': 'APIæ–‡æ¡£',
            'start_doc': 'è¡¥å…¨æ–‡æ¡£', 'start_release': 'ç‰ˆæœ¬å‘å¸ƒ', 'gen_prototype': 'åŸå‹è®¾è®¡',
            'gen_prd': 'PRDæ–‡æ¡£', 'security_scan': 'å®‰å…¨æ‰«æ', 'perf': 'æ€§èƒ½åˆ†æ',
            'genchangelog': 'æ›´æ–°æ—¥å¿—', 'genpr': 'PRæè¿°', 'resolve_conflict': 'è§£å†³å†²çª',
            'genapi': 'APIæ–‡æ¡£', 'gensql': 'SQLç”Ÿæˆ', 'gen_mock': 'Mockæ•°æ®',
        };

        let allTools = [];

        function generateSidebarTools() {
            const submenu = document.getElementById('tools-submenu');
            let html = '';
            for (const [categoryKey, categoryInfo] of Object.entries(toolsData.categories)) {
                const tools = toolsData[categoryKey];
                if (!tools || tools.length === 0) continue;
                html += `<div class="text-xs font-semibold text-text-tertiary uppercase tracking-wider px-2 py-1 mt-2">${categoryInfo.icon} ${categoryInfo.title}</div>`;
                tools.forEach(tool => {
                    const toolId = tool.name.replace(/_/g, '-');
                    const desc = toolDescriptions[tool.name] || '';
                    const displayText = desc ? `${tool.name} (${desc})` : tool.name;
                    html += `<a href="#${toolId}" class="block px-2 py-1.5 text-xs text-text-secondary hover:bg-bg-page hover:text-primary rounded transition-colors">${displayText}</a>`;
                });
            }
            submenu.innerHTML = html;
        }

        function scrollToTool(toolId) {
            const element = document.getElementById(toolId);
            if (element) {
                const headerHeight = 100;
                const elementPosition = element.getBoundingClientRect().top + window.pageYOffset;
                window.scrollTo({ top: elementPosition - headerHeight, behavior: 'smooth' });
                element.style.transition = 'background 0.3s';
                element.style.background = 'rgba(37, 99, 235, 0.05)';
                setTimeout(() => { element.style.background = ''; }, 2000);
            }
            if (window.innerWidth < 768) toggleSidebar();
        }

        function handleHashChange() {
            const hash = window.location.hash.slice(1);
            if (hash) {
                setTimeout(() => scrollToTool(hash), 100);
            }
        }

        function renderTools(filteredTools = null) {
            const container = document.getElementById('tools-container');
            let html = '';
            if (filteredTools && filteredTools.length === 0) {
                html = `<div class="text-center py-8 text-text-secondary"><div class="text-4xl mb-2">ğŸ”</div><p>æœªæ‰¾åˆ°åŒ¹é…çš„å·¥å…·</p></div>`;
            } else if (filteredTools) {
                html += '<div class="space-y-6">';
                filteredTools.forEach(tool => { html += renderToolCard(tool); });
                html += '</div>';
            } else {
                for (const [categoryKey, categoryInfo] of Object.entries(toolsData.categories)) {
                    const tools = toolsData[categoryKey];
                    if (!tools || tools.length === 0) continue;
                    html += `<section class="bg-white rounded-xl border border-border p-4 sm:p-6 mb-6 shadow-sm"><div class="flex items-center gap-3 mb-4 pb-4 border-b border-border"><span class="text-2xl">${categoryInfo.icon}</span><h2 class="text-lg sm:text-xl font-semibold text-text-primary">${categoryInfo.title}</h2><span class="ml-auto bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full text-xs font-medium">${tools.length} ä¸ª</span></div><div class="space-y-4">`;
                    tools.forEach(tool => { html += renderToolCard({ ...tool, category: categoryKey }); });
                    html += `</div></section>`;
                }
            }
            container.innerHTML = html;
        }

        function renderToolCard(tool) {
            const hasDetails = tool.params || tool.usage || tool.example;
            let detailsHTML = '';
            if (hasDetails) {
                detailsHTML = `<div class="mt-4 pt-4 border-t border-border">
                    ${tool.usage ? `<div class="mb-3"><h4 class="text-sm font-medium text-text-primary mb-2">ğŸ“– ä½¿ç”¨è¯´æ˜</h4><p class="text-sm text-text-secondary">${tool.usage}</p></div>` : ''}
                    ${tool.params ? `<div class="mb-3"><h4 class="text-sm font-medium text-text-primary mb-2">âš™ï¸ å‚æ•°è¯´æ˜</h4><ul class="space-y-1 text-sm text-text-secondary">${tool.params.map(p => `<li class="flex items-start gap-2"><code class="bg-gray-200 px-1.5 py-0.5 rounded text-xs flex-shrink-0">${p.name}</code><span class="text-xs text-text-tertiary">(${p.type}${p.required ? ', å¿…å¡«' : ', å¯é€‰'})</span><span class="text-sm text-text-secondary">- ${p.desc}</span></li>`).join('')}</ul></div>` : ''}
                    ${tool.example ? `<div><h4 class="text-sm font-medium text-text-primary mb-2">ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹</h4><div class="bg-slate-900 rounded-lg overflow-hidden"><div class="flex items-center justify-between px-3 py-2 bg-slate-800"><span class="text-xs text-slate-300 font-medium">Example</span></div><pre class="code-block p-4 text-sm text-slate-200 overflow-x-auto"><code>${tool.example.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</code></pre></div></div>` : ''}
                </div>`;
            }
            return `<div class="tool-card" id="${tool.name.replace(/_/g, '-')}"><div class="flex items-start gap-3"><div class="flex-1"><div class="flex items-center gap-2 mb-2"><code class="text-sm font-medium text-text-primary bg-gray-100 px-2 py-1 rounded">${tool.name}</code><span class="bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-xs font-medium">âœ“ ç»“æ„åŒ–</span></div><p class="text-sm text-text-secondary mb-2">${tool.description}</p><p class="text-xs text-text-tertiary font-mono">Schema: ${tool.schema}</p></div></div>${detailsHTML}</div>`;
        }

        function searchTools(query) {
            if (!query.trim()) {
                document.getElementById('searchResults').textContent = '';
                renderTools();
                return;
            }
            const lowerQuery = query.toLowerCase();
            const results = allTools.filter(tool => tool.name.toLowerCase().includes(lowerQuery) || tool.description.toLowerCase().includes(lowerQuery));
            document.getElementById('searchResults').textContent = results.length > 0 ? `æ‰¾åˆ° ${results.length} ä¸ªåŒ¹é…çš„å·¥å…·` : 'æœªæ‰¾åˆ°åŒ¹é…çš„å·¥å…·';
            renderTools(results);
        }

        function init() {
            // åŠ è½½ç¿»è¯‘
            const currentLang = window.currentLang || 'zh-CN';
            loadAllToolsTranslations(currentLang).then(() => {
                applyTranslationsToTools(currentLang);
                
                allTools = [];
                for (const [categoryKey, tools] of Object.entries(toolsData)) {
                    if (categoryKey === 'categories') continue;
                    tools.forEach(tool => { allTools.push({ ...tool, category: categoryKey }); });
                }
                generateSidebarTools();
                document.getElementById('tools-submenu').classList.remove('hidden');
                document.getElementById('tools-menu-icon').style.transform = 'rotate(180deg)';
                renderTools();
                document.getElementById('searchInput').addEventListener('input', (e) => { searchTools(e.target.value); });
                
                // ç›‘å¬ hash å˜åŒ–
                window.addEventListener('hashchange', handleHashChange);
                
                // é¡µé¢åŠ è½½æ—¶å¤„ç† hash
                handleHashChange();
            });
        }
        
        // è¯­è¨€åˆ‡æ¢æ—¶æ›´æ–°å·¥å…·æ•°æ®
        document.addEventListener('languageChanged', async (e) => {
            const newLang = e.detail.lang;
            await loadAllToolsTranslations(newLang);
            applyTranslationsToTools(newLang);
            renderTools();
        });

        document.addEventListener('DOMContentLoaded', init);
    </script>
    <script src="/assets/js/i18n.js"></script>
</body>
</html>
